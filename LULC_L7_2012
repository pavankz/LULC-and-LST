/**** Start of imports. If edited, may not auto-convert in the playground. ****/
var aoi = ee.FeatureCollection("users/b171905/Study_Area"),
    Waterbody = /* color: #d63000 */ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[78.46680672557932, 17.428859570936527],
                  [78.46860917003733, 17.417067006193026],
                  [78.47882302196604, 17.422062560633954]]]),
            {
              "LULC": 1,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.46830876262766, 17.437109818623302],
                  [78.46948893459421, 17.437519250479056],
                  [78.4688022890864, 17.43772396606233],
                  [78.46833022029978, 17.438522354641776],
                  [78.46792252452951, 17.439054611753303],
                  [78.4672358790217, 17.439341211093094],
                  [78.46663506420236, 17.43936168245728],
                  [78.465669468957, 17.439402625178744],
                  [78.46590550335031, 17.439075083149653],
                  [78.4668925562678, 17.439177440096923],
                  [78.46777232082468, 17.438911311914534],
                  [78.46796543987375, 17.43841999732688],
                  [78.46807272823435, 17.437601136739936]]]),
            {
              "LULC": 1,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.43790188344742, 17.34873379716863],
                  [78.44180717977311, 17.342957920597332],
                  [78.4434808781984, 17.341933810026656],
                  [78.44571247609879, 17.342671170213748],
                  [78.44116344960953, 17.347709718842406]]]),
            {
              "LULC": 1,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.38998966231057, 17.433335996227463],
                  [78.38947467817971, 17.430551777650365],
                  [78.38853054060647, 17.42809507892312],
                  [78.38977508558938, 17.42748089907432],
                  [78.39003257765481, 17.429282487437085],
                  [78.3908050538511, 17.432762778228543],
                  [78.39119129194924, 17.43489186457528],
                  [78.38994674696633, 17.435014695721872]]]),
            {
              "LULC": 1,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.37229698872781, 17.42504986661002],
                  [78.37259739613748, 17.42468135280095],
                  [78.37274759984231, 17.42335060229711],
                  [78.37313383794046, 17.423268709641576],
                  [78.37298363423562, 17.42578689199641],
                  [78.37242573476053, 17.425705000433762]]]),
            {
              "LULC": 1,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.453369009948, 17.360506854942695],
                  [78.4549354200127, 17.361879022815813],
                  [78.45602976129078, 17.363251180414718],
                  [78.45688806817554, 17.3651353203765],
                  [78.45628725335621, 17.36548347455297],
                  [78.45553623483204, 17.36413181346051],
                  [78.45534311578297, 17.362882542069173],
                  [78.45298277184986, 17.361018859081973],
                  [78.45309006021046, 17.360629736066578]]]),
            {
              "LULC": 1,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.56147469555754, 17.38521326016492],
                  [78.56100262677091, 17.385397556954885],
                  [78.55651797329801, 17.382182575220224],
                  [78.55668963467497, 17.381711585892123]]]),
            {
              "LULC": 1,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.48927494681408, 17.31874878395621],
                  [78.48931786215832, 17.31764259845339],
                  [78.49092718756725, 17.318093267425077],
                  [78.49011179602672, 17.31862587478476]]]),
            {
              "LULC": 1,
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.55251374415883, 17.42237036747758],
                  [78.55268540553578, 17.42101912670978],
                  [78.5553890722228, 17.418726089191722],
                  [78.55624737910756, 17.421223860802225],
                  [78.55470242671498, 17.42208374148367]]]),
            {
              "LULC": 1,
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.40318215502035, 17.464290999207396],
                  [78.40228093279134, 17.462039443352047],
                  [78.40386880052816, 17.46289913159996],
                  [78.40494168413412, 17.465232550674582],
                  [78.40262425554525, 17.46502786598713]]]),
            {
              "LULC": 1,
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.31520674466518, 17.46858967909616],
                  [78.31730959653285, 17.471496123237074],
                  [78.31396219968227, 17.471864542419986]]]),
            {
              "LULC": 1,
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.26152806563893, 17.5231860817825],
                  [78.26152806563893, 17.520771557647592],
                  [78.26410298629322, 17.520566935481654],
                  [78.26504712386647, 17.52175374083274],
                  [78.26255803390065, 17.52457748787925]]]),
            {
              "LULC": 1,
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.4655798751981, 17.52599083948354],
                  [78.46884144136021, 17.525029140958257],
                  [78.47315443345616, 17.524353902777538],
                  [78.47223175355504, 17.525561145027744],
                  [78.47090137788365, 17.526870686860573],
                  [78.46834791490147, 17.52578622320294],
                  [78.46536529847691, 17.527238993797983]]]),
            {
              "LULC": 1,
              "system:index": "12"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.51070535966466, 17.50859763204885],
                  [78.51160658189366, 17.506489871371723],
                  [78.51250780412266, 17.508126969164373]]]),
            {
              "LULC": 1,
              "system:index": "13"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.55230585421756, 17.497702030921786],
                  [78.55222002352909, 17.495246237803382],
                  [78.55453745211796, 17.495082517082416],
                  [78.55466619815067, 17.496760647481565]]]),
            {
              "LULC": 1,
              "system:index": "14"
            })]),
    UrbanBuiltup = /* color: #98ff00 */ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[78.48242297844918, 17.35524104234177],
                  [78.49804416375191, 17.35192312555093],
                  [78.50053325371773, 17.358313133979898],
                  [78.48405376153023, 17.360647889190385]]]),
            {
              "LULC": 2,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.47249491876482, 17.375976318304918],
                  [78.47764476007342, 17.37478856349572],
                  [78.48056300348162, 17.3790890184907],
                  [78.47421153253435, 17.379990053404057]]]),
            {
              "LULC": 2,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.5396167304817, 17.37296272800147],
                  [78.54871478346021, 17.372348362917137],
                  [78.54583945539625, 17.376812702266818],
                  [78.53910174635084, 17.37771374838363]]]),
            {
              "LULC": 2,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.51187841273669, 17.418962444147517],
                  [78.51299421168689, 17.412083167755064],
                  [78.51728574611072, 17.416505589464407],
                  [78.51685659266833, 17.420354647129827]]]),
            {
              "LULC": 2,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.41112267386733, 17.453223802584034],
                  [78.4187186897975, 17.45224124921987],
                  [78.41876160514174, 17.455557345591995],
                  [78.41146599662123, 17.45539358916289]]]),
            {
              "LULC": 2,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.44294335087628, 17.45025101204375],
                  [78.45019604405255, 17.44881809657915],
                  [78.45011021336407, 17.452338954411488],
                  [78.44294335087628, 17.452830231492364]]]),
            {
              "LULC": 2,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.44338586816689, 17.387485404803],
                  [78.44415834436317, 17.378475225054295],
                  [78.4528272438993, 17.380523032127464],
                  [78.44930818567177, 17.389287387518404]]]),
            {
              "LULC": 2,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.40728381312739, 17.38808800381203],
                  [78.40479472316157, 17.384320176833086],
                  [78.4094295803393, 17.37768533642019],
                  [78.41260531581294, 17.383091520827517]]]),
            {
              "LULC": 2,
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.3410146080399, 17.494443820857516],
                  [78.3421304069901, 17.49067819034876],
                  [78.35534833301548, 17.488959072230077],
                  [78.35852406848912, 17.494116377822678],
                  [78.34667943347935, 17.493788934198054]]]),
            {
              "LULC": 2,
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.26136372913365, 17.53520586765832],
                  [78.2604195915604, 17.531932145788517],
                  [78.26754353870396, 17.53209583328555],
                  [78.26419614185338, 17.53528770994785]]]),
            {
              "LULC": 2,
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.42741337260578, 17.5145828221003],
                  [78.44329204997395, 17.51327319160456],
                  [78.44423618754719, 17.51802055720449],
                  [78.43548145732258, 17.519412002904872]]]),
            {
              "LULC": 2,
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.54475805851689, 17.47801904279771],
                  [78.54441473576298, 17.470487023747484],
                  [78.56570074650517, 17.472451928332227],
                  [78.56243918034306, 17.483585986943275],
                  [78.54527304264775, 17.479165192281847]]]),
            {
              "LULC": 2,
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.56278615605382, 17.40538409943455],
                  [78.56381612431554, 17.398258600347983],
                  [78.56845098149327, 17.399814767529943],
                  [78.5672493518546, 17.404728892723472]]]),
            {
              "LULC": 2,
              "system:index": "12"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.42800144684585, 17.42715050610295],
                  [78.43023304474625, 17.43402921480007],
                  [78.42079166901382, 17.43402921480007]]]),
            {
              "LULC": 2,
              "system:index": "13"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.5236263555648, 17.385635217845646],
                  [78.52851870480796, 17.383423646988394],
                  [78.53418353024742, 17.387805807697013],
                  [78.52783205930015, 17.388952524015803]]]),
            {
              "LULC": 2,
              "system:index": "14"
            })]),
    UrbanGreenSpace = /* color: #0b4a8b */ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[78.3880277292835, 17.32299305407505],
                  [78.39729744363896, 17.305129804925716],
                  [78.41497856546513, 17.31152144214944]]]),
            {
              "LULC": 3,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.52586844481839, 17.422449908070906],
                  [78.52226355590237, 17.407217167192982],
                  [78.52930167235745, 17.398207959400246],
                  [78.53805640258206, 17.415570763039025]]]),
            {
              "LULC": 3,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.55084517516507, 17.448653799760628],
                  [78.54518034972561, 17.442021295492292],
                  [78.54724028624905, 17.435388549991405],
                  [78.55479338683499, 17.442676368379725]]]),
            {
              "LULC": 3,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.51857283629788, 17.4387458957598],
                  [78.52526762999905, 17.4307209178528],
                  [78.53050330199612, 17.436534967688896]]]),
            {
              "LULC": 3,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.43095067745709, 17.403837132792972],
                  [78.431294000211, 17.397448713121452],
                  [78.43661550289654, 17.397284904553693],
                  [78.43524221188092, 17.40334572382087]]]),
            {
              "LULC": 3,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.43574376162334, 17.485253129003883],
                  [78.43419880923076, 17.474610390743603],
                  [78.44089360293194, 17.47804888194724]]]),
            {
              "LULC": 3,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.45368922540816, 17.48301950238797],
                  [78.45557750055464, 17.473195337797293],
                  [78.46004069635542, 17.47368655862315]]]),
            {
              "LULC": 3,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.32463953475755, 17.460283038394927],
                  [78.32360956649583, 17.44783745315354],
                  [78.3354542015056, 17.449311316823444],
                  [78.3354542015056, 17.457826740216344]]]),
            {
              "LULC": 3,
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.29319649949787, 17.45019430968187],
                  [78.2879608275008, 17.434881996889978],
                  [78.30014878526447, 17.43177024675869],
                  [78.29971963182209, 17.449293620996013]]]),
            {
              "LULC": 3,
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.57807962990998, 17.47063218838135],
                  [78.57464640237092, 17.45925170801643],
                  [78.57919542886017, 17.457859801901524],
                  [78.58108370400666, 17.468831008650564]]]),
            {
              "LULC": 3,
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.57217552794809, 17.358014036806384],
                  [78.57663872374887, 17.34973973910839],
                  [78.57861282958383, 17.352607112271958],
                  [78.57586624755258, 17.358587489145595]]]),
            {
              "LULC": 3,
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.58437259662239, 17.34312372357382],
                  [78.58746250140754, 17.336569323076557],
                  [78.58883579242317, 17.34238636520548]]]),
            {
              "LULC": 3,
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.49829037524592, 17.334885937960937],
                  [78.50550015307795, 17.333370185619764],
                  [78.50301106311213, 17.337794508751497]]]),
            {
              "LULC": 3,
              "system:index": "12"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.39847092432834, 17.481543813062927],
                  [78.39718346400119, 17.474421288841967],
                  [78.40559487147189, 17.472292664281376],
                  [78.40765480799533, 17.476959231742484]]]),
            {
              "LULC": 3,
              "system:index": "13"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.44924765502283, 17.5070863139698],
                  [78.45087843810389, 17.50102894374267],
                  [78.45379668151209, 17.50389394131913],
                  [78.45053511534998, 17.505449206797998]]]),
            {
              "LULC": 3,
              "system:index": "14"
            })]),
    AquaVegetation = /* color: #ffc82d */ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[78.5462414316736, 17.38516118665673],
                  [78.54649892373902, 17.381925722971623],
                  [78.55572572275025, 17.38233527849869],
                  [78.55512490793092, 17.385406915738717]]]),
            {
              "LULC": 4,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.52580155316836, 17.379870764490814],
                  [78.52193917218692, 17.378334905861085],
                  [78.52612341825015, 17.37745434110193],
                  [78.52670277539737, 17.378478253211718],
                  [78.52944935742862, 17.376655685681058],
                  [78.52951373044498, 17.378478253211718],
                  [78.5265096563483, 17.379379291131233]]]),
            {
              "LULC": 4,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.57989069520835, 17.396957298660485],
                  [78.57808825075034, 17.392288684435027],
                  [78.57980486451987, 17.3895857480493],
                  [78.58220812379722, 17.38696468068881],
                  [78.58023401796225, 17.393353466590835]]]),
            {
              "LULC": 4,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.43113108639652, 17.372276487704124],
                  [78.43203230862552, 17.370228588401673],
                  [78.43366309170658, 17.370105713715386],
                  [78.43409224514896, 17.37186690967552],
                  [78.43310519223148, 17.371334456868965]]]),
            {
              "LULC": 4,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.41197178111811, 17.357760699639794],
                  [78.41261551128169, 17.35700291953545],
                  [78.41259405360957, 17.35612225223525],
                  [78.412851545675, 17.357371569707215],
                  [78.41233656154414, 17.3582317505582]]]),
            {
              "LULC": 4,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.43071589288188, 17.344893053588798],
                  [78.43090901193095, 17.343643651103747],
                  [78.43290457543803, 17.34386895382006],
                  [78.43558678445292, 17.34474967996533],
                  [78.43569407281352, 17.345794256656223],
                  [78.43414912042094, 17.34718701632459],
                  [78.43241104897929, 17.345773774817502],
                  [78.4315312844224, 17.344319558422615]]]),
            {
              "LULC": 4,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.48525361449487, 17.318980490246897],
                  [78.48727063567407, 17.317669456499324],
                  [78.48851518065698, 17.31844788391511]]]),
            {
              "LULC": 4,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.47393137707505, 17.43338746525513],
                  [78.47333056225571, 17.4289040348492],
                  [78.47792250408921, 17.431913472892546]]]),
            {
              "LULC": 4,
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.41404284939803, 17.464635848306973],
                  [78.41365661129988, 17.46217960882628],
                  [78.41623153195418, 17.46144273052266]]]),
            {
              "LULC": 4,
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.32799814998577, 17.476962843665657],
                  [78.3292641526408, 17.475673409382534],
                  [78.3297147637553, 17.477269850481665]]]),
            {
              "LULC": 4,
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.32849758239867, 17.502440991201276],
                  [78.32914131256224, 17.496424396008457],
                  [78.3313299951184, 17.497365781190304],
                  [78.33012836547972, 17.50109034431445]]]),
            {
              "LULC": 4,
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.47350701609601, 17.50401064414257],
                  [78.47412928858746, 17.50279302647475],
                  [78.47405418673505, 17.505238485627842],
                  [78.47330316821088, 17.5050133819768]]]),
            {
              "LULC": 4,
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.49208470514785, 17.476057787829692],
                  [78.49122639826308, 17.476057787829692],
                  [78.49129077127944, 17.474809281899574],
                  [78.49300738504897, 17.473110481387067],
                  [78.49266406229506, 17.47409292217107],
                  [78.4919130437709, 17.474973020870202]]]),
            {
              "LULC": 4,
              "system:index": "12"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.59917925547371, 17.321956184526513],
                  [78.5991577978016, 17.31980529970379],
                  [78.60003756235848, 17.319190756558015],
                  [78.60070275019417, 17.321095833619193],
                  [78.59945820521126, 17.32191521552704],
                  [78.599050509441, 17.32209957595266]]]),
            {
              "LULC": 4,
              "system:index": "13"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.38902288736404, 17.425804002004256],
                  [78.38792854608596, 17.423183454023967],
                  [78.38878685297072, 17.42375670210895]]]),
            {
              "LULC": 4,
              "system:index": "14"
            })]),
    Others = /* color: #00ffff */ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[78.45585189041556, 17.53144362180107],
                  [78.45374903854788, 17.52743322117825],
                  [78.46198878464163, 17.526287376144296],
                  [78.45949969467581, 17.529602122320313]]]),
            {
              "LULC": 5,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.40585510923779, 17.530693197748757],
                  [78.41482441618359, 17.526109856552928],
                  [78.41508190824902, 17.52995659715243],
                  [78.40589802458203, 17.532493764390594]]]),
            {
              "LULC": 5,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.40293686582959, 17.525127696945773],
                  [78.40559761717236, 17.519889422590005],
                  [78.40894501402295, 17.52295874231296],
                  [78.4041814108125, 17.52741939442517]]]),
            {
              "LULC": 5,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.30624919177846, 17.442193501318652],
                  [78.30642085315542, 17.43367734771551],
                  [78.31388812305288, 17.439327532475726],
                  [78.30530505420522, 17.446287664389335]]]),
            {
              "LULC": 5,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.39656664225123, 17.445252285648607],
                  [78.40133024546168, 17.444269689315846],
                  [78.40484930368922, 17.44865039047441],
                  [78.39802576395533, 17.44967390361164]]]),
            {
              "LULC": 5,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.42502152687939, 17.397945262623427],
                  [78.42978513008984, 17.397330981405794],
                  [78.43012845284375, 17.400852832384935],
                  [78.42609441048535, 17.40138519930486]]]),
            {
              "LULC": 5,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.53853148486824, 17.333724000126555],
                  [78.53698653247567, 17.331020199818365],
                  [78.54230803516121, 17.328357327264694],
                  [78.54535502460213, 17.33093826585409],
                  [78.54381007220955, 17.33388786553207]]]),
            {
              "LULC": 5,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.52934705253178, 17.424227183328973],
                  [78.5318361424976, 17.422261758894653],
                  [78.53449689384037, 17.424227183328973],
                  [78.5321794652515, 17.42570123776904]]]),
            {
              "LULC": 5,
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.557896172222, 17.505753968223722],
                  [78.55892614048372, 17.495685451670397],
                  [78.57540563267122, 17.494130102625636],
                  [78.56759504001985, 17.50190671475151]]]),
            {
              "LULC": 5,
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.61422940328087, 17.47516913709407],
                  [78.61521645619835, 17.471935268634407],
                  [78.6174051387545, 17.474555115856326]]]),
            {
              "LULC": 5,
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.37788121379613, 17.49194780247297],
                  [78.37393300212621, 17.49309386418562],
                  [78.37170140422582, 17.482860914643602],
                  [78.37745206035375, 17.477621421634357],
                  [78.38328854717015, 17.48056865501851],
                  [78.37625043071507, 17.485235010233275],
                  [78.37813870586156, 17.492520834232376]]]),
            {
              "LULC": 5,
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.3482765744455, 17.460375369459303],
                  [78.34655996067598, 17.458492211439154],
                  [78.34964986546113, 17.454643958432506],
                  [78.35265393955781, 17.456854666902775],
                  [78.3548855374582, 17.45521710764842],
                  [78.3574604581125, 17.457919072525666],
                  [78.35497136814668, 17.460293493428452]]]),
            {
              "LULC": 5,
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.41472279569773, 17.33102701135938],
                  [78.42339169523386, 17.33102701135938],
                  [78.42158925077585, 17.334877866291546],
                  [78.4133495046821, 17.33405854221986]]]),
            {
              "LULC": 5,
              "system:index": "12"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.57347835407367, 17.37175521324331],
                  [78.57991565570941, 17.371468507903444],
                  [78.58064521656146, 17.37347543585717],
                  [78.57407916889301, 17.374335541104603]]]),
            {
              "LULC": 5,
              "system:index": "13"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[78.57399922667028, 17.397262621001914],
                  [78.5706518298197, 17.39525595389382],
                  [78.57665997801305, 17.39374070087509],
                  [78.57683163939001, 17.396443575862254]]]),
            {
              "LULC": 5,
              "system:index": "14"
            })]);
/***** End of imports. If edited, may not auto-convert in the playground. *****/
// Applies scaling factors.
function applyScaleFactors(image) {
  var opticalBands = image.select('SR_B.').multiply(0.0000275).add(-0.2);
  var thermalBand = image.select('ST_B6').multiply(0.00341802).add(149.0);
  return image.addBands(opticalBands, null, true)
              .addBands(thermalBand, null, true);
}

var dataset = ee.ImageCollection('LANDSAT/LE07/C02/T1_L2')
    .filterDate('2012-01-01', '2012-12-01')
    .filterMetadata('CLOUD_COVER', 'less_than', 10)
    .filterBounds(aoi)
    .map(applyScaleFactors)
    .first();
 print(dataset);
var fill = dataset.focalMedian(1.5, 'circle', 'pixels', 10)
var final_image = fill.blend(dataset)
//Map.addLayer(fill.clip(aoi), {bands:['SR_B3', 'SR_B2', 'SR_B1'], min:0, max:0.3, gamma: 1.4}, 'Image_Fill');
Map.addLayer(dataset.clip(aoi), {bands:['SR_B4', 'SR_B3', 'SR_B2'], min:0, max:0.3, gamma: 1.4}, 'FCC');
Map.addLayer(final_image.clip(aoi), {bands:['SR_B4', 'SR_B3', 'SR_B2'], min:0, max:0.3, gamma: 1.4}, 'final_image');

var image2 = final_image.clip(aoi);
var features2 = Waterbody.merge(UrbanBuiltup).merge(UrbanGreenSpace).merge(AquaVegetation).merge(Others);
print(features2);

var bands1 = ['SR_B1', 'SR_B2', 'SR_B3', 'SR_B4', 'SR_B5', 'SR_B7'];

var training2 = image2.select(bands1).sampleRegions({
  collection: features2,
  properties: ['LULC'],
  scale: 30
});

var withRandom = training2.randomColumn('random');
var split2 = 0.7; //70% training, 30% testing

var trainingPartition2 = withRandom.filter(ee.Filter.lt('random', split2));
var testingPartition2 = withRandom.filter(ee.Filter.gte('random',split2));

// Train the classifier
var classifier = ee.Classifier.smileRandomForest(100).train({
  features: trainingPartition2,
  classProperty: 'LULC',
  inputProperties: bands1});
  
  //Classify the input imagery
var final2 = image2.classify(classifier);

var color = ['495bd6', 'd63000', '20e122', '215d1b', 'ffc82d' ];
Map.addLayer(final2, {min:1, max: 5, palette: color, }, 'aoi_2012');
Map.centerObject(aoi, 11);


//Accuracy Assessment

var accuracyClassifier = ee.Classifier.smileRandomForest(100).train({
  features: testingPartition2,
  classProperty:'LULC',
  inputProperties: bands1
});

//Classify the test FeatureCollection
var test = testingPartition2.classify(accuracyClassifier);

//Calculate confusiion matrix
var confusionMatrix = test.errorMatrix('LULC', 'classification');
print('Confusion Matrix', confusionMatrix);

//Claculate overall accuracy
var OA = confusionMatrix.accuracy();
print("Overall accuracy", OA);

//calculate consumers accuracy, also known as user's accuracy or
//specificity and the complement of comission error(1-comission error).
print("Consumer's accuracy", confusionMatrix.consumersAccuracy());


//Claculate producers accuracy also known as sensitivity and the
//compliment of omission error(1-omission error).

print("Producer's accuracy", confusionMatrix.producersAccuracy());

//calculate kappa statistic
print('kappa statistic', confusionMatrix.kappa());

// Calculation area fror each class (of classified)

var classes_area = ee.Image.pixelArea().addBands(final2).divide(1e6).reduceRegion({
  reducer: ee.Reducer.sum().group(1), geometry: aoi, scale: 30, bestEffort:true});
  
print("All Classes Area in Sqare Km", classes_area);

Export.image.toDrive({
   image: final2,
  description: 'LULC_2012',
  folder: 'LandCover',
  region:aoi,
  crs: 'EPSG:32644',
  scale: 30,
  fileFormat: 'GeoTIFF',
  maxPixels:1e12
});


    //Adding the Legend
    
var panel = ui.Panel({
  style: {
    position: 'bottom-left',
    padding: '5px;'
  }
})

var title = ui.Label({
  value: 'GHMC Classification 2012',
  style: {
    fontSize: '14px',
    fontWeight: 'bold',
    margin: '0px;'
  }
})

panel.add(title)

var color = ['495bd6', 'd63000', '20e122', '215d1b', 'ffc82d']
var lc_class = ['Waterbody', 'Urban Builtup', 'Urban Green Space', 'Aqua Vegetation', 'Others']
var list_legend = function(color, description) {
  
  var c = ui.Label({
    style: {
      backgroundColor: color,
      padding: '10px',
      margin: '4px'
    }
  })
  
  var ds = ui.Label({
    value: description,
    style: {
      margin: '5px'
    }
  })
  
  return ui.Panel({
    widgets: [c, ds],
    layout: ui.Panel.Layout.Flow('horizontal')
  })
}

for(var a = 0; a < 5; a++){
  panel.add(list_legend(color[a], lc_class[a]))
}

Map.add(panel)





